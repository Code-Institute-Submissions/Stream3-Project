{% extends "base.html" %} 
{% block content %}
{% load thumbnail %}
{% load staticfiles %} 

{% block extra_head %}
<link rel="stylesheet" type="text/css" href="{% static 'cart/css/cart.css' %}">
{% endblock %} 


        <!-- Start Header Section -->
        <div class="page-header">
            <div class="overlay">
                <div class="container">
                    <div class="row">
                        <div class="col-md-12">
                            <h1>Cart List</h1>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <!-- End Header Section -->

<section>
{% if messages %}
    {% for message in messages %} 
        {% if message.tags == "error"%}
        <div class="alert alert-danger">
            <div class="messages">
               {{ message }} 
            </div>
        </div>
        {% elif message.tags == "success"%}
        <div class="alert alert-success">
            <div class="messages">
               {{ message }} 
            </div>
        </div>        
        {% elif message.tags == "info"%}
        <div class="alert alert-warning">
            <div class="messages">
               {{ message }} 
            </div>
        </div>                
        {% endif %}
   {% endfor %}
{% endif %}
</section>




<table class="table table-responsive">
    <thead>
        <tr>
            <th>Name</th>
            <th>Thumb Nail</th>
            <th>Brief Description</th>
            <th>Category</th>            
            <th>Price</th>
            <th>Quantity</th>
        </tr>
    </thead>
    <tbody id="table-row-highlight">
        {% for product in products %}
        <tr>
            <td>{{ product.name }}</td>



            <td><img src="{{ product.photo|thumbnail_url:'list-large' }}" alt="{{ product.photo_alt }}"></td>

            <td>{{ product.description }}</td>
            <td>{{product.category}}</a></td>
            <td>&pound;{{ product.price }}</td>
            <td>
                <div class="form-horizontal">
                    <form role="form" method="post" id="register-form" action="{% url 'cart_list' %}">{% csrf_token %}
                        <input type="number" name="amount" id="search" 

                        {% if stock_control_max_limit > 0  %}
                            value={{product.stock_level}} 
                        {% else %}
                            value={{product.amount}} 
                        {% endif %}

                        min="0" 

                        {% if stock_control_max_limit > 0  %}
                            max="{{product.stock_level}}" 
                        {% endif %}
                        />
                        <input name="product" type="hidden" value="{{product.id}}">
                        <button class="btn btn-sm btn-success"  type="submit">Update Cart</button>
                    </form>
                </div>
            </td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% if delete_button_show  %}
<form action="{% url 'cart_list' %}" method="post"> {% csrf_token %}
    <input name="delete" type="hidden">
    <button class="btn btn-danger pull-right"  type="submit">DELETE Cart</button>
</form>
{% endif %}

{% endblock %}


{% block extra_footer %}
<script type="text/javascript" src="{% static 'cart/js/cart.js' %}"></script>
{% endblock %} 